<?php
$conexion = new mysqli("localhost", "root", "", "tienda_ropa");

if ($conexion->connect_error) {
    die("Error de conexiÃ³n: " . $conexion->connect_error);
}

$sql = "SELECT nombre_producto, precio, imagen_principal, imagen_secundaria FROM productos";
$resultado = $conexion->query($sql);

if ($resultado->num_rows > 0) {
    while ($fila = $resultado->fetch_assoc()) {
        ?>
        <!-- ðŸ›ï¸ PRODUCTO -->
        <div class="producto">
            <div class="imagen-container">
                <img src="<?php echo $fila['imagen_principal']; ?>" 
                     alt="<?php echo $fila['nombre_producto']; ?>" 
                     class="imagen principal">
                <img src="<?php echo $fila['imagen_secundaria']; ?>" 
                     alt="<?php echo $fila['nombre_producto']; ?> secundaria" 
                     class="imagen secundaria">
                <button class="favorito"><i class="fa-regular fa-heart"></i></button>

                <!-- â­ FAVORITO FUNCIONAL -->
                <form action="agregar_favorito.php" method="POST">
                    <input type="hidden" name="id_producto" value="2"> <!-- Cambia por el ID real -->
                    <input type="hidden" name="nombre" value="Camisa Cross Ribbon Sailor Lace Collar V1 y V2">
                    <input type="hidden" name="precio" value="350">
                    <input type="hidden" name="imagen" value="../img/Cross Ribbon Sailor Lace Collar Blouse_ Dear My Love.jpg">
                    <button type="submit" class="favorito">
                    <i class="fa-regular fa-heart"></i>
                   </button>
                 </form>

                <form action="agregar_carrito.php" method="POST">
                    <input type="hidden" name="nombre" value="<?php echo $fila['nombre_producto']; ?>">
                    <input type="hidden" name="precio" value="<?php echo $fila['precio']; ?>">
                    <input type="hidden" name="imagen" value="<?php echo $fila['imagen_principal']; ?>">
                    <button type="submit" class="carrito">
                        <i class="fa-solid fa-cart-shopping"></i>
                    </button>
                </form>
            </div>

            <!-- InformaciÃ³n del producto -->
            <div class="info">
                <h3><?php echo $fila['nombre_producto']; ?></h3>
                <p class="precio">$<?php echo number_format($fila['precio'], 2); ?></p>
            </div>
        </div>
        <?php
    }
} else {
    echo "<p>No hay productos disponibles.</p>";
}

$conexion->close();
?>
</section>
</div>